<!DOCTYPE html><html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Torneio â€¢ eFootball</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet"><style>
:root{
  --bg:#05070a;
  --card:#11151c;
  --border:#222;
  --primary:#00ff88;
  --text:#eee;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Montserrat',sans-serif;
  background:var(--bg);
  color:var(--text);
}
header{
  padding:20px;
  border-bottom:2px solid var(--primary);
  text-align:center;
}
.container{
  max-width:900px;
  margin:auto;
  padding:15px;
}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:18px;
  margin-bottom:15px;
  animation:fade .4s ease;
}
.card h3{margin:0 0 10px}
input{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#000;
  color:#fff;
  margin-bottom:10px;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-weight:900;
  cursor:pointer;
}
.btn{
  background:var(--primary);
  color:#000;
}
.player{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px;
  border-bottom:1px solid var(--border);
}
.player:last-child{border:none}
.share{
  background:#000;
  color:var(--primary);
  border:1px solid var(--border);
}
small{opacity:.6}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1}}
</style></head>
<body><header>
  <h2 id="nomeTorneio">Carregando...</h2>
  <small id="info"></small>
</header><div class="container">  <div class="card" id="adminArea" style="display:none">
    <h3>âž• Adicionar jogador</h3>
    <input id="nomeJogador" placeholder="Nome do jogador">
    <button class="btn" onclick="addJogador()">Adicionar</button>
  </div>  <div class="card">
    <h3>âš½ Jogadores</h3>
    <div id="listaJogadores"></div>
  </div>  <div class="card">
    <button class="share" onclick="compartilhar()">ðŸ”— Compartilhar torneio</button>
  </div></div><script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
import { getFirestore, doc, getDoc, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAWic8GgxaPKjyFtIKH4KXj4J6A6bVOBg0",
  authDomain: "efootball-torneio.firebaseapp.com",
  projectId: "efootball-torneio",
  storageBucket: "efootball-torneio.firebasestorage.app",
  messagingSenderId: "909084318349",
  appId: "1:909084318349:web:a627eaf51f973b87df60c4"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth();

const params = new URLSearchParams(window.location.search);
const torneioId = params.get("id");

const torneioRef = doc(db,"torneios",torneioId);

let dono = false;

onAuthStateChanged(auth, async user=>{
  const snap = await getDoc(torneioRef);
  if(!snap.exists()) return alert("Torneio nÃ£o encontrado");

  document.getElementById("nomeTorneio").innerText = snap.data().nome;
  document.getElementById("info").innerText = "ID: " + torneioId;

  if(user && snap.data().owner === user.uid){
    dono = true;
    document.getElementById("adminArea").style.display = "block";
  }
});

window.addJogador = async ()=>{
  if(!dono) return;
  const nome = document.getElementById("nomeJogador").value.trim();
  if(!nome) return;

  await addDoc(collection(db,"torneios",torneioId,"jogadores"),{
    nome,
    pontos:0,
    vitorias:0,
    empates:0,
    derrotas:0,
    criadoEm:Date.now()
  });

  document.getElementById("nomeJogador").value="";
};

onSnapshot(
  collection(db,"torneios",torneioId,"jogadores"),
  snap=>{
    document.getElementById("listaJogadores").innerHTML = snap.empty
      ? "<small>Nenhum jogador ainda</small>"
      : snap.docs.map(d=>`
        <div class="player">
          <strong>${d.data().nome}</strong>
          <small>${d.data().pontos} pts</small>
        </div>
      `).join("");
  }
);

window.compartilhar = ()=>{
  const link = window.location.href;
  if(navigator.share){
    navigator.share({title:"Torneio eFootball",url:link});
  }else{
    navigator.clipboard.writeText(link);
    alert("Link copiado!");
  }
};
</script></body>
</html>
